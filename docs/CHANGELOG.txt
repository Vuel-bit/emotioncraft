## v0_2_103_passD (2026-02-12)
- passD Pass 1 — boot/start hardening (main.js).
- Bootstrap: add EC._registerModule + EC.safe (debug-only warnings).
- Bootstrap: fix BUILD_ID/BUILD metadata drift (v0_2_103_passD, 2026-02-12).
- HUD: cache hot text/HTML writes to reduce per-tick DOM churn (no UI changes).
- CONST: add EC.CONST.OPP compatibility alias.
- passD Pass 2 — consolidate hue/well naming helpers (EC.hueKey/hueTitle/wellLabel*), update call sites (no text changes).
- Input: move stage pointer-up gesture resolver from main.js into systems_input.js; main now forwards stage events.
- SIM.initMVP: remove duplicate _activeLevelDef assignment and duplicate BREAK.reset block (no behavior changes).
- passD Chunk 3B — roster swap + unlock gating + start-energy progression + mood/vibe tuning + break HUD text removal.
- Dispositions (random): added global quiet/burst cadence windows (DISP_CADENCE_*), applied only to random scheduling (no force/balance math changes).
- Dispositions: implemented authoritative per-run quirk timeline buffer (SIM._quirkTimeline), event-based and capped; accumulates unshielded force per instance.
- Debug HUD: now prints quirk timeline (mm:ss start time, type, tier label, well name, unshielded force, duration, gap).
- Mental breaks: no modal popup; break details append to Log overlay. Added hit-stop + HUD toast + center/well FX.
- Psyche warning flashes restored on threshold crossing (>=450 or <=50).
- Lobby: Heroes page for Transcended; Sally portrait wired.
- Rename quirk labels: LOCKS_IN → Fixates; AMPED → Obsesses.
- Patients: last-treatment quirk naming cleanup (Fixates/Obsesses; legacy aliases).
- PLAN_CHAIN: evaluation uses rounded psyche (matches HUD numbers).
- PLAN_CHAIN: per-step holdSec supported (default 10; SPIN_ZERO 0).
- Roster: wire portraits for all patients (assets/patients/<id>.png).
- Patient WIN auto-returns to lobby to show post-win popups; reset guard per run.

- passD Chunk 3A — warn flashes + goal sync + log + break banner cleanup.
## Prior notable changes (rolled into this build lineage)
- Total Psyche cap system removed; psyche is per-hue only (0..500).
- Center core replaced with Treatment hold ring + countdown (PLAN_CHAIN).
- Zen timer standardized to 10:00 and shown in HUD during Zen.
- Set-0 costs are integer energy units (display/gate/spend match).

2026-02-13 — v0_2_103_passD_pass5
- Treatment plans: Intake is now 3 steps (no spin step; Step 3 is no-hold), Weekly is now 3 steps (removed final spin-zero step), and Zen has a new 4-step timed sequence.
- Added new timed plans: Tranquility + Transcendence.
- Progression: after Intake, choose Weekly / Zen / Tranquility; Transcendence unlocks after Zen + Tranquility are completed for that patient; transcending only occurs after completing Transcendence.
- Timed plan timer generalized to Zen/Tranquility/Transcendence; lobby plan picker updated and lobby detail panel shows Zen/Tranquility completion badges.

2026-02-13 — v0_2_103_passD_pass6
- Dispositions (random): replaced slot/cadence scheduling with a per-second tier ramp chance (0.025 / 0.05 / 0.1), capped to at most one new schedule per second, while preserving telegraph + global min-gap.
- Debug HUD: added “Copy Debug” button to copy the currently displayed debug text.

2026-02-13 — v0_2_103_passD_pass7
- Dispositions (random): ramp timers are now per-template (reset only when that quirk instance ends); mental breaks cancel pending/telegraph/active quirks and reset all ramp timers.

2026-02-14 — v0_2_103_passD_pass8
- Hotfix: quirk ramp STEP_BY_TIER corrected to 0.00025/0.0005/0.001 (was 100× too fast).
- Hotfix: All plan steps now require 10s hold except SPIN_ZERO (0s); removed holdSec:0 from non-spin steps.
- Hotfix: PLAN_CHAIN flash/advance gating hardened; fixes Tranquility Step 1 not starting hold.

2026-02-16 — v0_2_103_passD_pass18
- Added Lobby Tutorial button + primary tutorial board (mechanics walkthrough).

2026-02-16 — v0_2_103_passD_pass19
- Progression: Intake is treated as complete for all patients (no Intake gating; enforced even when loading older saves).
- Tutorial: added final win-conditions step and completion modal button; tutorial disables spillover + mental breaks.
- Normal gameplay: first-time spill + mental break popups pause and explain what happened.
- Lobby: added “?” toggle with detailed explanations for the selected patient’s Mood/Vibe/Traits/Quirks.

- Pass 20: Tutorial step 6 goal-viz + button fixes; Weekly quirk reward update; Lobby “?” info toggle fixes; Spill/break popup copy + tutorial spill disable.

Pass 21: Tutorial goalViz + Spin0/Pair0 gating flags; Grounded trait forces timed boards to 10:00; Roster reordered to 15 with Nina/Dex/Sage added and June rethemed to Juno; Lobby '?' quirks render fix + centering polish.

Pass 22: Mental break first-occurrence popups now use log-text lines (title + deltas); Grounded timer authoritative in core_mechanics fallback/clamp; Taglines corrected for Nina/Dex/Sage/Juno.

Pass 23: Spin jam first-occurrence popups now include Amount deltas (and use jam summary line as title).
Pass 24: Added core_actions.js (EC.ACTIONS facade). Routed flick/swipe + Spin0/Pair0 through EC.ACTIONS. No behavior changes.
Pass 25: Implemented EC.ACTIONS (no UI delegation). UI controls now wrap actions; added controls sync stamp for slider resync.

Pass 26: Extracted canonical ACTION_MATH (preview/cost/unit rounding/pair cost) and routed ACTIONS + UI controls to it to prevent drift.

Pass 27: Added app_loop.js (EC.APP.tickMvp). core_mechanics EC.tick delegates MVP branch to app loop. No behavior changes.

Pass 28: Added core_pipeline_mvp.js (EC.PIPE.stepMvp). core_mechanics MECH.step delegates MVP systems ordering to pipeline. No behavior changes.

Pass 29: Hotfix — Hue Break no longer references undefined msg (prevents crash). MVP tick delegation no longer falls through into legacy unless SIM.wells exists.
